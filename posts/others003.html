<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GCCç·¨è­¯å™¨é‹ä½œåŸç† + å‹•æ…‹/éœæ…‹é€£çµè§£æ</title>
  <link rel="icon" href="LOGO.ico" type="image/x-icon">

  <!-- Highlight.js for SQL -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script>
  function isMobile() {
    return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}

  function contact(){
    if (isMobile()) {
        location.href = "/mobile#contact"
    }
    else{
        location.href = "/#contact"
    }
  }

  </script>
  <!-- åŸæœ¬ä½ çš„ CSS ä¿ç•™ -->
  <style>
    :root {
       --neon-blue: #00bfff;
      --glow-green: #24ff72;
      --bg-dark: #0a0a0a;
      --text-light: #dddddd;
      --code-bg: #1a1a1a;
      --highlight: #d21dab;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Roboto', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-light);
      line-height: 1.8;
    }
    main {
      max-width: 850px;
      margin: 0 auto;
      padding: 100px 30px 50px;
    }
    h1, h2, h3 {
      color: var(--glow-green);
      text-shadow: 0 0 8px var(--glow-green);
    }
    .subtitle {
      font-size: 1.1rem;
      color: var(--neon-blue);
      margin-bottom: 2em;
      text-shadow: 0 0 5px var(--neon-blue);
    }
    a {
      color: var(--neon-blue);
      text-decoration: underline;
      transition: color 0.3s ease;
    }
    a:hover {
      color: var(--highlight);
    }
    pre {
      background-color: var(--code-bg);
      color: #0ff;
      padding: 1em;
      border-radius: 10px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      margin: 1.5em 0;
      box-shadow: 0 0 10px #00fff7a4;
    }
    code {
      font-family: 'Courier New', monospace;
      background-color: #111;
      color: #0ff;
      padding: 0.2em 0.4em;
      border-radius: 4px;
    }
    hr {
      border: none;
      height: 1px;
      background: linear-gradient(to right, #00bfff, transparent);
      margin: 2em 0;
    }
    footer {
      text-align: center;
      padding: 1em;
      background-color: #1a1a1a;
      color: #888;
      font-size: 0.9em;
      border-top: 1px solid #444;
    }
    nav {
      position: fixed;
      top: 0;
      left: -1.2em;
      width: 97vw;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      padding: 1em 2em;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 999;
      border-bottom: 1px solid #00bfff44;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--neon-blue);
      cursor: pointer;
      text-shadow: 0 0 10px var(--neon-blue);
      text-decoration: none; 
    }
    .logo:hover,
    .logo:focus {
        transform: scale(1.1);
        color:#0ff
    }
    .nav-links {
      list-style: none;
      display: flex;
      gap: 1.5vw;
    }
    .nav-links a {
      color: #fff;
      text-decoration: none;
      transition: 0.3s;
    }
    .nav-links a:hover {
      color: var(--neon-blue);
    }
  </style>
</head>
<body>

  <nav>
    <div class="logo" onclick="location.href='/index.html'">ZHANGCODE</div>
    <ul class="nav-links">
      <li><a href="javascript:void(0)" onclick="contact()">æ„è¦‹åé¥‹</a></li>
    </ul>
  </nav>

  <main>
    <h1>ğŸ”§ .dll æ˜¯ä»€éº¼æª”æ¡ˆï¼Ÿå¸¶ä½ äº†è§£ GCC ç·¨è­¯å™¨é‹ä½œåŸç†ï¼</h1>
    <p class="subtitle">å¼µå®¶éŠ˜ Â· 2025/08/16</p>
    <hr>

    <h2>âš™ï¸ GCC ç·¨è­¯æµç¨‹</h2>
    <p>GCC (GNU Compiler Collection) ä¸¦ä¸æ˜¯å–®ç´”ã€ŒæŠŠ C åŸå§‹ç¢¼è½‰æˆå¯åŸ·è¡Œæª”ã€çš„ä¸€å€‹å–®ä¸€å·¥å…·ï¼Œè€Œæ˜¯ä¸€æ•´å¥—<strong>å·¥å…·éˆ (toolchain)</strong>ã€‚é›–ç„¶æˆ‘å€‘è¡¨é¢ä¸Šåªçœ‹åˆ°å®ƒèƒ½æŠŠ <code>.c</code> æª”è½‰æˆ <code>.exe</code>ï¼ˆWindowsï¼‰æˆ– <code>a.out</code>ï¼ˆLinuxï¼‰ï¼Œä½†å¯¦éš›ä¸Šå®ƒçš„ä¸­é–“éç¨‹åˆ†æˆå¥½å¹¾å±¤ï¼š</p>

    <ol>
      <li><b>Preprocessing (é è™•ç†)</b>ï¼šå±•é–‹ <code>#define</code>ã€ç§»é™¤è¨»è§£ã€å±•é–‹ <code>#include</code><br>
      ï¼ˆé€™å€‹éšæ®µåªæœƒæŠŠæ¨™é ­æª”çš„<strong>å®£å‘Š</strong>å±•é–‹åˆ°ç¨‹å¼ç¢¼è£¡ï¼Œä¸¦ä¸åŒ…å«æ–¹æ³•çš„å®šç¾©ï¼ï¼‰</li>
      <li><b>Compilation (ç·¨è­¯)</b>ï¼šæŠŠ C/C++ åŸå§‹ç¢¼è½‰æ›æˆçµ„åˆèªè¨€ (<code>.s</code>)ã€‚</li>
      <li><b>Assembly (çµ„è­¯)</b>ï¼šæŠŠçµ„åˆèªè¨€è½‰æˆ<strong>"å¯é‡å®šä½ç›®æ¨™æª”"</strong> (<code>.o</code>)ï¼Œé›–ç„¶é€™è£¡é¢åŒ…å«äº†æ©Ÿå™¨ç¢¼ä»–ï¼Œä½†å®ƒé‚„ä¸æ˜¯æœ€çµ‚çš„åŸ·è¡Œæª”ï¼Œå› ç‚ºå®ƒé‚„æ²’æœ‰æŠŠå‡½å¼åº«çµ¦é€£çµé€²ä¾†ã€‚å®ƒè£¡é¢æœƒåŒ…å«ç¬¦è™Ÿè¡¨ + é‡å®šä½è¡¨ï¼Œç”¨æ–¼åœ¨linkerå±¤æŠŠå®šç¾©åŠ é€²ä¾†!</li>
      <li><b>Linking (é€£çµ)</b>ï¼šæŠŠæ‰€æœ‰ <code>.o</code> æª”èˆ‡éœ€è¦çš„å‡½å¼åº«æ•´åˆï¼Œç”Ÿæˆæœ€çµ‚çš„å¯åŸ·è¡Œæª”ã€‚</li>
    </ol>

    <p>ä¸éæœ‰è¶£çš„æ˜¯ï¼Œæˆ‘å€‘å¯ä»¥æ‰‹å‹•åœåœ¨æŸå€‹éšæ®µä¾†æŸ¥çœ‹ä¸­é–“ç”¢ç‰©ï¼š</p>

    <pre><code class="language-bash">
# é¡¯ç¤º GCC ä¸­é–“ç”¢ç‰©
$ gcc -E hello.c -o hello.i   # é è™•ç† â†’ ç”¢ç”Ÿ .i
$ gcc -S hello.i -o hello.s   # ç·¨è­¯ â†’ ç”¢ç”Ÿ .s (çµ„åˆèªè¨€)
$ gcc -c hello.s -o hello.o   # çµ„è­¯ â†’ ç”¢ç”Ÿ .o (æ©Ÿå™¨ç¢¼/ç›®æ¨™æª”)
$ gcc hello.o -o hello        # é€£çµ â†’ ç”¢ç”Ÿå¯åŸ·è¡Œæª”
</code></pre>

    <h2>ğŸ”§ å‹•æ…‹é€£çµï¼Ÿé‚£æ˜¯ä»€éº¼ï¼Ÿ</h2>
    <p>å•é¡Œä¾†äº†ï¼šå¦‚æœå¾ˆå¤šç¨‹å¼éƒ½ç”¨åˆ° <code>stdio</code>ï¼Œæ˜¯ä¸æ˜¯æ¯å€‹å¯åŸ·è¡Œæª”è£¡éƒ½è¦è¤‡è£½ä¸€ä»½ï¼Ÿé€™æ¨£å¤ªæ²’æ•ˆç‡äº†ã€‚æ–¼æ˜¯å°±æœ‰äº†<strong>å‹•æ…‹é€£çµ</strong>ï¼</p>

    <p>æ‰€è¬‚å‹•æ…‹é€£çµï¼Œå°±æ˜¯åœ¨ã€Œé€£çµéšæ®µã€ä¸æŠŠå‡½å¼çš„æ©Ÿå™¨ç¢¼ç›´æ¥è¤‡è£½é€²ç¨‹å¼ï¼Œè€Œæ˜¯åªæ”¾ä¸€å€‹<strong>å¼•ç”¨ (reference)</strong>ã€‚ç­‰åˆ°ç¨‹å¼åŸ·è¡Œæ™‚ï¼Œæ‰æœƒå» <code>.so</code> æˆ– <code>.dll</code> è£¡é¢è¼‰å…¥çœŸæ­£çš„å®šç¾©ã€‚</p>

    <h2>ğŸ“¦ å»ºç«‹å…±äº«å‡½å¼åº« (.so / .dll)</h2>
    <p>å¦‚æœæƒ³è®“å¤šå€‹ç¨‹å¼å…±ç”¨åŒä¸€ä»½ç¨‹å¼ç¢¼ï¼Œå°±å¯ä»¥å»ºç«‹ã€Œå…±äº«å‡½å¼åº«ã€ã€‚åœ¨ Linux æ˜¯ <code>.so</code>ï¼Œåœ¨ Windows æ˜¯ <code>.dll</code>ã€‚</p>

    <pre><code class="language-cpp">// mathlib.cpp
extern "C" int add(int a, int b) {
    return a + b;
}
</code></pre>

    <pre><code class="language-bash"># Linux: ç”¢ç”Ÿ .so
$ g++ -fPIC -shared mathlib.cpp -o libmath.so

# Windows (MinGW): ç”¢ç”Ÿ .dll
$ g++ -shared mathlib.cpp -o mathlib.dll
</code></pre>

    <p>åœ¨å¦ä¸€å€‹ç¨‹å¼ä¸­ï¼Œå°±èƒ½ç›´æ¥ä½¿ç”¨ï¼š</p>

    <pre><code class="language-cpp">// main.cpp
#include &lt;iostream&gt;
extern "C" int add(int, int);

int main() {
    std::cout &lt;&lt; add(2, 3) &lt;&lt; std::endl;
    return 0;
}
</code></pre>

    <pre><code class="language-bash">$ g++ main.cpp -L. -lmath -o main
$ ./main  # è¼¸å‡º 5
</code></pre>

    <p><b>å°æé†’ï¼š</b>åœ¨ Windows ä¸Šè¦é€£çµ <code>.dll</code>ï¼Œé€šå¸¸é‚„éœ€è¦ä¸€å€‹ <code>.lib</code> æª”ï¼ˆåŒ¯å…¥åº«ï¼‰ï¼Œå®ƒæä¾›ã€Œå‡½å¼ä½ç½®çš„ç´¢å¼•ã€ã€‚ä¾‹å¦‚ï¼š</p>

    <pre><code class="language-bash">cl /LD mylib.c   # ç”Ÿæˆ mylib.dll + mylib.lib
cl main.c mylib.lib  # ä½¿ç”¨åŒ¯å…¥åº«é€²è¡Œé€£çµ
</code></pre>

    <h2>ğŸ”— å‹•æ…‹é€£çµ vs éœæ…‹é€£çµ</h2>
    <p>é€£çµæ–¹å¼æœƒå½±éŸ¿ç¨‹å¼çš„é«”ç©ã€æ•ˆèƒ½èˆ‡ç¶­è­·æ€§ï¼š</p>

    <ul>
      <li><b>éœæ…‹é€£çµ (.a / .lib)</b>ï¼šæŠŠå‡½å¼åº«ç¨‹å¼ç¢¼ç›´æ¥è¤‡è£½åˆ°å¯åŸ·è¡Œæª” â†’ åŸ·è¡Œæª”è¼ƒå¤§ï¼Œä½†ä¸ä¾è³´å¤–éƒ¨æª”æ¡ˆã€‚ç”±æ–¼å°‘äº†è¼‰å…¥å‹•ä½œï¼Œæ•ˆèƒ½å¯èƒ½ç¨å¿«ã€‚</li>
      <li><b>å‹•æ…‹é€£çµ (.so / .dll)</b>ï¼šåªä¿ç•™å¼•ç”¨ï¼Œç¨‹å¼å•Ÿå‹•æ™‚å†è¼‰å…¥ â†’ åŸ·è¡Œæª”é«”ç©å°ã€å¯å…±ç”¨ã€æ›´æ–°æ–¹ä¾¿ï¼Œä½†éœ€è¦ç¢ºä¿ç³»çµ±æœ‰å°æ‡‰çš„å‡½å¼åº«ã€‚</li>
    </ul>

    <h3>ğŸ“Š å„ªåŠ£å‹¢æ¯”è¼ƒ</h3>
    <table border="1" cellspacing="0" cellpadding="8">
      <tr><th>é¡å‹</th><th>å„ªé»</th><th>ç¼ºé»</th></tr>
      <tr><td>éœæ…‹é€£çµ</td><td>ä¸ä¾è³´å¤–éƒ¨åº«ã€éƒ¨ç½²ç°¡å–®</td><td>æª”æ¡ˆå¤§ã€æ›´æ–°å›°é›£ï¼ˆä¿®æ”¹å‡½å¼éœ€é‡æ–°ç·¨è­¯æ•´å€‹ç¨‹å¼ï¼‰</td></tr>
      <tr><td>å‹•æ…‹é€£çµ</td><td>æª”æ¡ˆå°ã€å¯å…±ç”¨ã€æ›´æ–°å®¹æ˜“</td><td>ç‰ˆæœ¬ä¸ä¸€è‡´å¯èƒ½å‡ºéŒ¯ã€æ•ˆèƒ½ç•¥ä½</td></tr>
    </table>

    <h2>ğŸŒ è·¨èªè¨€æ•´åˆ</h2>
    <p>æ›´æœ‰è¶£çš„æ˜¯ï¼ŒGCC ç”¢ç”Ÿçš„ <code>.so</code> / <code>.dll</code> é‚„èƒ½è¢« Pythonã€Javaã€C# ç­‰èªè¨€å‘¼å«ã€‚ä¾‹å¦‚ Python å¯ä»¥ç”¨ <code>ctypes</code>ï¼š</p>

    <pre><code class="language-python">import ctypes
lib = ctypes.CDLL("./libmath.so")
print(lib.add(10, 20))  # è¼¸å‡º 30
</code></pre>

    <p>é€™ä¹Ÿæ˜¯ç‚ºä»€éº¼ç†è§£ã€Œç·¨è­¯å™¨ + é€£çµã€çš„åŸç†ï¼Œå¯ä»¥è®“ä½ æ›´éˆæ´»åœ°æ•´åˆä¸åŒèªè¨€èˆ‡ç³»çµ±ã€‚</p>
    <p>ä»Šå¤©çš„æ–‡ç« å°±åˆ°é€™è£¡å•¦ï¼Œå¦‚æœæœ‰ä»»ä½•å•é¡Œæ­¡è¿è¯çµ¡æˆ‘ï¼</p>
    <p>åƒè€ƒå½±ç‰‡: <a href="https://youtu.be/XJC5WB2Bwrc?si=qSBi6o9ljzLx1cBX" target="_blank">é»æˆ‘</a> </p>
    <p>ğŸ”™ <a href="https://zhangcode.ddns.net/">å›é¦–é </a></p>
</main>


  <footer>
    &copy; 2025 ZHANGCODE. BY. å¼µå®¶éŠ˜
  </footer>

</body>
</html>
